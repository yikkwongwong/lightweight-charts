"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1976],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),p=c(a),u=i,m=p["".concat(l,".").concat(u)]||p[u]||h[u]||r;return a?n.createElement(m,s(s({ref:t},d),{},{components:a})):n.createElement(m,s({ref:t},d))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,s=new Array(r);s[0]=u;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[p]="string"==typeof e?e:i,s[1]=o;for(var c=2;c<r;c++)s[c]=a[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},77769:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var n=a(87462),i=(a(67294),a(3905));const r={sidebar_position:2,sidebar_label:"Screen Readers",pagination_title:"Screen Readers",title:"Screen Readers",description:"In this section we will add screen reader support to the chart.",keywords:["a11y","accessibility","screenreaders","keyboard","assistive"],pagination_prev:"a11y/keyboard",pagination_next:"a11y/readability"},s="Integrating ARIA roles and descriptive content for enhanced accessibility",o={unversionedId:"a11y/screenreader",id:"a11y/screenreader",title:"Screen Readers",description:"In this section we will add screen reader support to the chart.",source:"@site/tutorials/a11y/screenreader.mdx",sourceDirName:"a11y",slug:"/a11y/screenreader",permalink:"/lightweight-charts/tutorials/a11y/screenreader",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,sidebar_label:"Screen Readers",pagination_title:"Screen Readers",title:"Screen Readers",description:"In this section we will add screen reader support to the chart.",keywords:["a11y","accessibility","screenreaders","keyboard","assistive"],pagination_prev:"a11y/keyboard",pagination_next:"a11y/readability"},sidebar:"tutorialsSidebar",previous:{title:"Keyboard navigation",permalink:"/lightweight-charts/tutorials/a11y/keyboard"},next:{title:"Readability",permalink:"/lightweight-charts/tutorials/a11y/readability"}},l={},c=[{value:"Use of ARIA attributes in the chart",id:"use-of-aria-attributes-in-the-chart",level:2},{value:"aria-live",id:"aria-live",level:3},{value:"aria-label",id:"aria-label",level:3},{value:"aria-hidden",id:"aria-hidden",level:3},{value:"Adding the ARIA attributes to an existing chart via JavaScript",id:"adding-the-aria-attributes-to-an-existing-chart-via-javascript",level:3},{value:"Generating a description of the chart",id:"generating-a-description-of-the-chart",level:2},{value:"Semantic HTML",id:"semantic-html",level:2}],d={toc:c},p="wrapper";function h(e){let{components:t,...a}=e;return(0,i.kt)(p,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"integrating-aria-roles-and-descriptive-content-for-enhanced-accessibility"},"Integrating ARIA roles and descriptive content for enhanced accessibility"),(0,i.kt)("p",null,"Accessibility in web development extends beyond just accommodating keyboard-only\nusers. Many users with varying abilities make use of assistive technologies like\nscreen readers to effectively interact with web applications.\n",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA"},"ARIA"),"\n(Accessible Rich Internet Applications) roles and states offer a powerful\ntoolkit to improve this interaction by conveying information about the behavior\nand purpose of interface components."),(0,i.kt)("p",null,"In the context of our line chart, we'll be looking at how to implement ARIA\nattributes to further enhance its accessibility in addition to generating\ndescriptive content for our graph."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"In this tutorial we will only make use of\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-live"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-label"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-hidden")," attributes. You can explore\na ","[more comprehensive list of attributes on this MDN page]","\n(",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes"},"https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes"),").")),(0,i.kt)("h2",{id:"use-of-aria-attributes-in-the-chart"},"Use of ARIA attributes in the chart"),(0,i.kt)("h3",{id:"aria-live"},"aria-live"),(0,i.kt)("p",null,"To provide real-time updates about the chart to assistive technologies, we use\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-live")," attribute. It accepts a few potential values, although\n",(0,i.kt)("inlineCode",{parentName:"p"},'"polite"')," and ",(0,i.kt)("inlineCode",{parentName:"p"},'"assertive"')," are the most common."),(0,i.kt)("p",null,"With ",(0,i.kt)("inlineCode",{parentName:"p"},'aria-live="polite"'),", updates are presented at the user's next convenient\nopportunity, such as when they stop typing or when a task is completed. With\n",(0,i.kt)("inlineCode",{parentName:"p"},'aria-live="assertive"'),", updates are presented immediately."),(0,i.kt)("p",null,"Our chart uses the ",(0,i.kt)("inlineCode",{parentName:"p"},'"assertive"')," value because the description should be read\nout based on a user action (keyboard action):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<div id="chart" aria-live="assertive" tabindex="0"></div>\n')),(0,i.kt)("h3",{id:"aria-label"},"aria-label"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-label")," attribute is used to specify a string that labels the current\nelement. It's useful when there isn't any text content that describes this\nelement."),(0,i.kt)("p",null,"On our chart, it could read something like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<div\n    id="chart"\n    aria-live="polite"\n    aria-label="interactive line chart"\n    tabindex="0"\n></div>\n')),(0,i.kt)("h3",{id:"aria-hidden"},"aria-hidden"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"aria-hidden"),' attribute is used to hide irrelevant or redundant\ninformation from assistive technologies. Its value is either "true" or "false".'),(0,i.kt)("p",null,"For example, if our chart contained a decorative element with no semantic\nmeaning, we could use ",(0,i.kt)("inlineCode",{parentName:"p"},'aria-hidden="true"')," to hide it from screen readers:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<div id="decorative-element" aria-hidden="true"></div>\n')),(0,i.kt)("h3",{id:"adding-the-aria-attributes-to-an-existing-chart-via-javascript"},"Adding the ARIA attributes to an existing chart via JavaScript"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"\x3c!-- Template for HTML elements added to the chart container for the A11y improvements --\x3e\n<template id=\"a11y-helpers\">\n    <div tabindex=\"-1\" role=\"alert\" aria-live=\"assertive\"></div>\n</template>\n\n<script>\n    function addAriaAttributesAndAlerter(chart) {\n        const containerEl = chart.chartElement().parentElement;\n        if (!containerEl) return;\n        // make focusable\n        containerEl.tabIndex = 0;\n        containerEl.style.position = 'relative';\n        containerEl.ariaLabel =\n            'Line plot of Accessibility stock price. Press the H key to display the available interaction keys.';\n        chart.chartElement().ariaHidden = 'true';\n\n        const templateElement = document.getElementById('a11y-helpers');\n        const clone = templateElement.content.cloneNode(true);\n        containerEl.appendChild(clone);\n    }\n<\/script>\n")),(0,i.kt)("h2",{id:"generating-a-description-of-the-chart"},"Generating a description of the chart"),(0,i.kt)("p",null,"In addition to ARIA roles, providing a textual description for our charts helps\nall users, especially those relying on screen readers or other assistive\ntechnologies."),(0,i.kt)("p",null,"You may generate a description of a chart by applying domain-specific knowledge.\nIt's beneficial to outline the general trend or patterns of the data, highlight\nany notable points or anomalies, and summarize the implications of the data."),(0,i.kt)("p",null,"You can add a descriptive section to the chart:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<div id="chart-description" aria-live="assertive">\n    \x3c!-- The content here should be dynamically generated based on the chart data --\x3e\n</div>\n')),(0,i.kt)("p",null,"You can use JavaScript to change the content inside this div whenever the chart\ndata is updated:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const descriptionElement = document.getElementById('chart-description');\ndescriptionElement.textContent = generateDescription(mainSeries.data());\n")),(0,i.kt)("p",null,"Here, ",(0,i.kt)("inlineCode",{parentName:"p"},"generateDescription(data)")," would be a function that you write to\ntranslate the chart's data into human-readable insights. The function would vary\ngreatly based on what the charts represent and how much detail you wish to\nprovide."),(0,i.kt)("p",null,"The example describes the chart based on its first and last visible data\npoints in addition to the highest and lowest points displayed. This is used to\ngenerate a description like this:"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"The first price is $679.10 at Wed Sep 19 2018. The last price is $555.37 at\nWed May 15 2019. The actual change in price was -$123.73, corresponding to a\npercentage change of -18.22%. The lowest price was $32.76 at Fri Dec 21 2018.\nThe highest price was $951.33 at Sun Mar 24 2019.")),(0,i.kt)("p",null,"The following code could be used as a starting point for generating chart\ndescriptions:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"function formatDate(time) {\n    return new Date(time * 1000).toDateString();\n}\n\nfunction formatValue(value) {\n    return `${value < 0 ? '-' : ''}$${Math.abs(value).toFixed(2)}`;\n}\n\nfunction getStats(data) {\n    const stats = {\n        start: data[0],\n        close: data[data.length - 1],\n        low: data[0],\n        high: data[0],\n    };\n\n    for (const point of data) {\n        if (point.value > stats.high.value) {\n            stats.high = point;\n        }\n        if (point.value < stats.low.value) {\n            stats.low = point;\n        }\n    }\n\n    return stats;\n}\n\nfunction getVisibleSeriesData(chart, series) {\n    const timeScale = chart.timeScale();\n    const visibleRange = timeScale.getVisibleLogicalRange();\n    const data = [];\n    for (let i = Math.round(visibleRange.from); i <= visibleRange.to; i++) {\n        const d = series.dataByIndex(i, 0);\n        if (d !== null) {\n            data.push(d);\n        }\n    }\n    return data;\n}\n\nfunction describeFinanceChart(data) {\n    if (!data || data.length === 0) {\n        return 'The data set is empty.';\n    }\n\n    const stats = getStats(data);\n\n    const firstPrice = `The first price is ${formatValue(\n        stats.start.value\n    )} at ${formatDate(stats.start.time)}.`;\n    const lastPrice = `The last price is ${formatValue(\n        stats.close.value\n    )} at ${formatDate(stats.close.time)}.`;\n\n    const actualChange = stats.close.value - stats.start.value;\n    const percentChange = (actualChange / stats.start.value) * 100;\n\n    const changeDescription = `The actual change in price was ${formatValue(\n        actualChange\n    )}, corresponding to a percentage change of ${percentChange.toFixed(2)}%.`;\n\n    let lowHigh = '';\n    if (\n        stats.low.time !== stats.start.time &&\n        stats.low.time !== stats.close.time\n    ) {\n        lowHigh += `The lowest price was ${formatValue(\n            stats.low.value\n        )} at ${formatDate(stats.low.time)}.`;\n    }\n    if (\n        stats.high.time !== stats.start.time &&\n        stats.high.time !== stats.close.time\n    ) {\n        lowHigh += ` The highest price was ${formatValue(\n            stats.high.value\n        )} at ${formatDate(stats.high.time)}.`;\n    }\n\n    return `${firstPrice} ${lastPrice} ${changeDescription} ${lowHigh}`.trim();\n}\n")),(0,i.kt)("h2",{id:"semantic-html"},"Semantic HTML"),(0,i.kt)("p",null,"Using\n",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Glossary/Semantics#semantics_in_html"},"Semantic HTML"),"\nelements offers several benefits. Firstly, they enhance the accessibility of web\ncontent as they provide specific meaning to the browser and assistive technology\nlike screen readers, helping them understand the content's structure and\npurpose. This is crucial for users with disabilities."),(0,i.kt)("p",null,"It is suggested that the container provided to the ",(0,i.kt)("inlineCode",{parentName:"p"},"createChart")," method should\nuse a semantic element such as ",(0,i.kt)("inlineCode",{parentName:"p"},"<figure>")," instead of a generic element like\n",(0,i.kt)("inlineCode",{parentName:"p"},"div"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<figure id="chart"></figure>\n')),(0,i.kt)("p",null,"In the next part, we'll discuss contrast control and font scaling."))}h.isMDXComponent=!0}}]);